


{% extends "MyApp/base.html" %}

{% block content %}
    {% load static %}
    {% if messages %}
        {% for message in messages %}
            <br/>
            <div>
                <center>
                    <div style="padding:1rem; border-radius:15px; width:auto; display:flex; justify-content:center;align-centent:center;" class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'warning' %}alert-warning{% elif message.tags == 'error' %}alert-danger{% elif message.tags == 'info' %}info{% endif %}">
                        <p style="font-size:20px">
                            <b> {{ message }}</b>
                        </p>
                    </div>
                </center>
            </div>

        {% endfor %}
    {% endif %}

    <div class="container">
        <center style="padding:1rem">
            <div>
                <div style="padding:1rem">
                    <h1><b>Colors Application basic information</b></h1>
                </div>
                <hr/>
                <h3>

                    {{federationPersonel.FederationName}}
                </h3>
                
                
            </div>
      
        </center>

        <div class="booking-form" style="border:solid 1px grey; padding:1rem; border-radius:12px">
            <div style="border:solid 2px; padding: 1rem; border-radius:12px" class="text-danger">

                <p class="text-danger" style="font-size:17px">
                    <b>
                        Please note that the event you are applying for must be at least 30 days away. Otherwise, you will not be allowed to continue with the application.
                    </b>
                    
                </p>
            </div>
            <br/>
            <form method="post"  enctype="multipart/form-data" style="width:inherit">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6 mb-4">

                        <div class="form-outline">
                        
                            <input required type="text" name="EventName" placeholder="Name of event"  class="form-control form-control-lg">
                            <label class="form-label" for="EventName">Event Name</label>
                    
                        </div>

                    </div>

                
                
                    <div class="col-md-6 mb-4">

                    <div class="form-outline" style="display:flex;flex-direction: column">
                        
                        <input  required  type="date" id="StartDate" name="StartDate" onchange="dateChanged(this)" class="form-control form-control-lg">
                        <label class="form-label" for="Middlename">Start Date</label>
                        <div id="datemsg">
                            
                        </div>
                    
                    </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-4">

                        <div class="form-outline">
                        
                            <input required type="date" name="EndDate" class="form-control form-control-lg">
                            <label class="form-label" for="EndDate">End Date</label>
                    
                        </div>

                    </div>

                
                
                    <div class="col-md-6 mb-4">

                    <div class="form-outline" style="display:flex;flex-direction: column">
                        
                        <input required  type="number" name="NumberOfTeam"  class="form-control form-control-lg">
                        <label class="form-label" for="NumberOfTeam">Number Of Team Members</label>
                    
                    </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-4">

                        <div class="form-outline">
                        
                            <input required type="text" name="HostCity" class="form-control form-control-lg">
                            <label class="form-label" for="HostCity">Host City</label>
                    
                        </div>

                    </div>

                
                
                    <div class="col-md-6 mb-4">

                    <div class="form-outline" style="display:flex;flex-direction: column">
                        
                        <input required  type="text" name="HostProvince"  class="form-control form-control-lg">
                        <label class="form-label" for="Middlename">Host Province</label>
                    
                    </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-4">

                        <div class="form-outline">
                        
                            <input required type="text" name="MethodOfSelection" class="form-control form-control-lg">
                            <label class="form-label" for="MethodOfSelection">Method Of Selection</label>
                    
                        </div>

                    </div>

                
                
                    <div class="col-md-6 mb-4">

                    <div class="form-outline" style="display:flex;flex-direction: column">
                        
                    
                        <input required type="date" name="SelectionApprovedDate" class="form-control form-control-lg" />
                            
                        <label class="form-label" for="RepresatativeType">Team Selection Approved  Date</label>
                    
                    </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-4">

                        <div class="form-outline">
                        
                            <input required type="text" name="ModeOfTravel" class="form-control form-control-lg">
                            <label class="form-label" for="ModeOfTravel">Mode of travel</label>
                    
                        </div>

                    </div>

                
                
                    <div class="col-md-6 mb-4">

                        <div class="form-outline" style="display:flex;flex-direction: column">
                            
                            <div class="" style="display:flex;justify-content:center ">
                                <input required  type="date" name="TravelDate" style=""  class="form-control form-control-lg">
                                <input required type="time" name="TravelTime" />
                                
                            </div>
                            <label class="form-label" for="TravelDateTime">Travel Date And Time</label>
                        
                        </div>

                    </div>
                </div>


                <input class="btn btn-default btn-primary" style="width:100%" type="submit" value="Save and continue"/> 
            </form>
            
            
        </div>

    </div>

    <script>

        //checking date

        function dateChanged(input){

            let date = input.value
            let dateComps = date.split('-')
            console.log("Date has been changed!", dateComps)
            let year = parseInt(dateComps[0])
            let month = parseInt(dateComps[1])
            let day = parseInt(dateComps[3])

            verifyDate(date)

        }
        
        function verifyDate(datestr){
            console.log("datestr: ",datestr)
            
            fetch("http://127.0.0.1:8000/checkDateAp/"+datestr,{
                method:"GET",
                
               // mode:'no-cors',
                
               
            }).then(function(response){
                
               
                return response.json()
            }).then(function(data) {
               
                console.log(data.isValid); 
                if(data.isValid){
                    datemsg = document.getElementById("datemsg")
                    datemsg.innerHTML = '<i class="text-success">Date valid</i>'
                }
                else{
                    datemsg = document.getElementById("datemsg")
                    datemsg.innerHTML = '<i class="text-danger">Date must be 30 days or above before the event</i>'
                    date = document.getElementById("StartDate")
                    date.value =null
                    return;
                }
            }).catch(function(error){
                console.log(error)
                datemsg = document.getElementById("datemsg")
               // document.getElementById('OfficialLetterhead_selected').innerHTML= '<small class="text-danger"><b>Something went wrong, please try again.</b></small>'
               datemsg.innerHTML += ' (<i class="text-danger">Something went wrong while validating date please try again</i>)'

            });
        }

    </script>

{% endblock %}






{% comment %} 

<form method="post" >
    {% csrf_token %}









   



    <label for="ModeOfTravel">Mode Of Travel</label><br/>

    <input required type="Text" name="ModeOfTravel" placeholder="Mode Of Travel"/><br/><br/>



    <input type="submit" value="Submit" />
</form>

<hr/> {% endcomment %}